<div id="puissance-4"></div>

<style>
    table, thead, td {
        border: 1px solid;
        user-select: none;
    }
    td {
        width: 50px;
        height: 50px;
    }
</style>

<script>

    /*
    const numberOfRows = 6;
    const numberOfColumns = 7;
    const player1 = 'yellow';
    const player2 = 'red';
    const piecesToAlign = 4;
    let currentPlayer = player1;

    const gameBody = document.getElementById('puissance-4')
*/

    let random
    {
        increment = 0
        generateRandomId = function () {
            return new Date().getTime()+'-'+increment++;
        }
    }

    class Game
    {
        players = []
        currentPlayer = null;

        constructor(numberOfRows, numberOfColumns, piecesToAlign) {
            this.numberOfRows = numberOfRows;
            this.numberOfColumns = numberOfColumns;
            this.piecesToAlign = piecesToAlign;
            this.id = generateRandomId();
            this.HTMLTable = this.generateTable()
            this.HTMLHeader = this.generateHeader()
            this.modifyTableHeader('sdssdf')
        }

        addPlayers(player) {
            this.players.push(player)
            // Set le joueur actuel si il n'y en as pas le premier joueur instcrit sera donc le premier à jouer
            !this.currentPlayer ? this.setCurrentPlayer(player) : null;
        }

        removePlayer(player) {
            const playerIndex = this.players.indexOf(player)
            this.players.splice(playerIndex)
        }

        setCurrentPlayer(player) {
            this.currentPlayer = player
        }

        generateTable() {
            // génération de la table
            let table = document.createElement('table');
            document.getElementById('puissance-4').appendChild(table);

            let tableBody = table.createTBody()
            for(let row = 0; row<this.numberOfRows; row++) {
                let tableRow = tableBody.insertRow();
                for(let column = 0; column<this.numberOfColumns; column++) {
                    new Tile(row, column, tableRow.insertCell());

                    //tableCell.addEventListener('click',play)
                    //tableCell.innerHTML = column - row;
                }
            }
            return table
        }
        generateHeader() {
            // Génération du header de la table
            let tableHeader = this.HTMLTable.createTHead().insertRow().insertCell()
            // colspan représente la largeur de la cellule en nombre de colones
            tableHeader.colSpan = this.numberOfColumns

            return tableHeader;
        }

        /**
         * Modifie le header du tableau
         * @param {string}message
         * @param {string}backgroundColor
         * @param {boolean}hasButton
         */
        modifyTableHeader(message, backgroundColor = 'lightgrey', hasButton = false) {
            this.HTMLHeader.innerHTML = message
            this.HTMLHeader.style.backgroundColor = backgroundColor
        }

    }
    class Player {
        constructor(name, color) {
            this.name = name;
            this.color = color;
        }

    }
    class Tile {
        player = 5;
        constructor(row, column, HTMLCell) {
            this.row = row;
            this.column = column;
            this.HTMLCell = HTMLCell;
        }

    }
    const game = new Game(6,7,4)
    game.addPlayers(new Player('player1', 'yellow'))
    game.addPlayers(new Player('player2', 'red'))

    // console.log(game.players)
    console.log(game.currentPlayer)


    /*
    //création de la grille

    gameBody.appendChild(table);
    let tableRows = table.rows;

    function play(){
        let cellColumn = this.className
        let cellRow = this.parentNode.rowIndex;

        let cells = table.getElementsByClassName(cellColumn)

        for (let i = 0; i < cells.length; i++) {
            if (cells[i+1] === undefined || cells[i+1].innerHTML !== '') {
                console.log('oui')
                cells[i].innerHTML = currentPlayer;
            } else {
                console.log('non')
            }
        }
        swapPlayers()
    }
    function swapPlayers()
    {
        if (currentPlayer === player1) {
            currentPlayer = player2;
        } else if (currentPlayer === player2) {
            currentPlayer = player1;
        }
    }
*/

</script>