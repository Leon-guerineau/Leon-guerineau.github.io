<div id="puissance-4">

</div>

<style>
    table, thead, td {
        border: 1px solid;
        user-select: none;
    }
    td {
        width: 50px;
        height: 50px;
    }
</style>

<script>

    const numberOfRows = 6;
    const numberOfColumns = 7;
    const player1 = 'yellow';
    const player2 = 'red';
    const piecesToAlign = 4;
    let currentPlayer = player1;

    const gameBody = document.getElementById('puissance-4')

    class Game {
        constructor(numberOfRows, numberOfColumns, piecesToAlign) {
            this.numberOfRows = numberOfRows;
            this.numberOfColumns = numberOfColumns;
            this.piecesToAlign = piecesToAlign;

            let table = document.createElement('table');
            for(let row = 0; row<numberOfRows; row++) {
                let tableRow = table.insertRow();
                tableRow.className = 'row-'+row;
                for(let column = 0; column<numberOfColumns; column++) {
                    let tableCell = tableRow.insertCell();
                    tableCell.className = 'col-'+column;
                    tableCell.addEventListener('click',play)
                    //tableCell.innerHTML = column - row;
                }
            }
            gameBody.appendChild(table);
        }
        generateTable() {

        }

    }
    class Player {
        constructor(name, color) {
            this.name = name;
            this.color = color;
        }

    }
    class Tile {
        constructor(row, column) {
            this.row = row;
            this.column = column;
        }
    }

    new Game(6,7,4)

    //crÃ©ation de la grille

    gameBody.appendChild(table);
    let tableRows = table.rows;

    function play(){
        let cellColumn = this.className
        let cellRow = this.parentNode.rowIndex;

        let cells = table.getElementsByClassName(cellColumn)

        for (let i = 0; i < cells.length; i++) {
            if (cells[i+1] === undefined || cells[i+1].innerHTML !== '') {
                console.log('oui')
                cells[i].innerHTML = currentPlayer;
            } else {
                console.log('non')
            }
        }
        swapPlayers()
    }
    function swapPlayers()
    {
        if (currentPlayer === player1) {
            currentPlayer = player2;
        } else if (currentPlayer === player2) {
            currentPlayer = player1;
        }
    }


</script>